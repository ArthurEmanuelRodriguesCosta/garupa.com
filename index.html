<!DOCTYPE html>

<html ng-app="app">

<head>
  <meta charset="UTR-8">
  <title> garupa.com </title>
  <link rel="shortcut icon" href="favicon.ico">

  <script src='libs/jquery-2.1.3.js'></script>
  <script src='libs/angular.min.js'></script>
  <script src='libs/angular-css.min.js'></script>
  <script src='libs/angular-ui-router.js'></script>
  <script src='libs/angular-animate.min.js'></script>
  <script src="libs/bootstrap/js/flat-ui.min.js"></script>
  <script src='libs/underscore.js'></script>
  <script src="libs/bootstrap3-typeahead.js"></script>
  <script src="libs/bootstrap-multiselect.js"></script>
  <script src="libs/bootstrap-timepicker.min.js"></script>
  <script src="libs/bootstrap-datepicker.js"></script>
  <script src='libs/require.js'></script>

  <link href="libs/bootstrap/css/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="libs/bootstrap/css/flat-ui.min.css" rel="stylesheet">
  <link href="libs/bootstrap-timepicker.min.css" rel="stylesheet">
  <link href="libs/datepicker.css" rel="stylesheet">
  <link href="libs/bootstrap-multiselect.css" rel="stylesheet">

  <link rel="stylesheet" href="app/views/search-rides/search-rides.css">

  <script src='app/app.js'></script>
  <script src="app/views/share/constants.js"></script>
  <script src="app/views/share/users.js"></script>
  <script src="app/views/search-rides/search-rides.js"></script>

</head>

<body ng-controller='search-rides'>
  <div class="main-container container">

<!-- Search box -->
<div class="row">
  <div class="col-sm-10 col-sm-offset-1">
    
    <h1 class="text-center login-title"> Ache seu bigu! </h1>
    <div class='col-sm-8 col-sm-offset-2 search-box box'>

      <form name='form-search' data-toggle="validator" role="form" class="form-group">

        <!-- texto/imagem e botao -->
        <div class='col-md-6'>
          <h3> {{ explanation_title }} </h3>
          <p> {{ explanation }} </p>
          <a href="#login" class="btn btn-primary" ng-click="search()"> Buscar carona </a>
        </div>
        
        <div class='col-md-6'>
          
          <label for="label-type">Estou indo para: </label>
          <br>
          <input type="checkbox" ng-model="myWay" ng-change="changeWay()" data-on-text="UFCG" data-off-text="Casa" data-off-color="warning" id="way-cb" data-label-text="UFCG">  
          <br>
          <br>

          <label for="label-adress">Seu bairro:</label>
          <input id="label-adress" class='form-control' ng-model="search.adress" type="text" data-source="{{dataSource}}" data-items="4"  data-provide="typeahead" placeholder="Bairro" spellcheck="false" required>
          <br>

          <label for="labe-mat">Dia da carona:</label>
          <input id="label-neighborhood" ng-model="form.neighborhoodFrom" type="text" 
            class="form-control" style="text-transform:capitalize" placeholder="Rua/Bairro" required>
          <br>

          <label for="labe-mat">dia da carona:</label>
          <input id="label-neighborhood" ng-model="form.neighborhoodFrom" type="text" 
            class="form-control" style="text-transform:capitalize" placeholder="Rua/Bairro" required>
          <br>        
   
          <div class="help-block with-errors"></div>
          
        </div>
      </form>
    </div>
  
<!-- Busca nao foi realizada -->
<div ng-if="!searchWasMade">
  <img class="img-responsive" style="width: 100%" src='assets/img/no-search.jpg'/>
</div>

<!-- Busca realizada -->
<div ng-if="searchWasMade">

  <!-- Busca feita porem nao achou caronas validas -->
  <div ng-if="filtered_users.length === 0" class="row not-found-box box">
    
    <div class="col-md-8 col-md-offset-2">
      <h4>Eita! Parece que nao tem bigu desse tipo nao, que pena :(. </h4>
    </div>

    <div class="col-md-4 col-md-offset-4" style="background-color:red">
      <button ng-submit="setModalMessage()" class="btn btn-md btn-primary btn-block" type="submit" data-toggle="modal" data-target="#modal" id="notify"> 
        Me notificar quando surgir um bigu desse!
      </button> 
    </div>
  
  </div>
  
  <!-- Busca feita e resultados foram encontrados -->
  <div ng-if="filtered_users.length !== 0" class="row find-box box">
    
    <table class='table table-responsive'>
      <tr><th><h4>Bigus encontrados</h4></th></tr>
      <tr ng-repeat="user in filtered_users">
        <td>
          <div class="row ride-box">
            
            <div class="col-md-4">
              <img class="img-responsive img-profile" ng-src="{{user.photo_url}}">
            </div>
            
            <div class="col-md-4">  
              <p>Nome: {{user.name}}</p>
              <p>Telefone: {{user.phone}}</p>
              <p>Bairro: {{user.address}}</p>
            </div>
            
            <div class="col-md-4">
              <button ng-click="setModalMessage($event)" class="btn btn-md btn-primary btn-block" 
              type="submit" data-toggle="modal" id="make-a-friend" data-target="#modal"> Amigos de bigu! </button> 
              <button ng-click="setModalMessage($event)" class="btn btn-md btn-primary btn-block"
              type="submit" data-toggle="modal" id="send-invitation" data-target="#modal"> Marcar carona </button> 
            </div>
          
          </div>
        </td>
      </tr>
    </table>
  </div>
</div>

<!-- modals -->
<div class="modal fade" id="modal" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <form class="form-horizontal" role="form">
        <div class="modal-header">
          <h4>{{modal_title}}<h4>
        </div>
        <div class="modal-body">
          <p> {{modal_message}}</p>
        </div>
        <div class="modal-footer">
          <a class="btn btn-default" data-dismiss="modal">Fechar</a>
        </div>
      </form>
    </div>
  </div>
  
</div>

</body>

</html>
