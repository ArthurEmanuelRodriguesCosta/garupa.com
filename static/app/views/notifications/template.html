
<div class="container" id="notification">
  <div class="notificationsNav">
    <ul>
      <li class="lnk"> Notificações</li>
      <li class="filter-option {{ (filter == '') ?'selected' : ''}}"> <a href="#" ng-click="changeFilterTo('')">
        Todas as notificações</a> </li>
      <li class="filter-option {{ (filter == 'status') ?'selected' : ''}}"> <a href="#" ng-click="changeFilterTo('status', VIEWED)">
        Notificações lidas</a> </li> <br>
      <li class="lnk">Filtrar por tipo</li>
      <li class="filter-option {{ (filter == 'null') ?'selected' : ''}}"> <a href="#" ng-click="changeFilterTo('')">
        Recentes</a> </li>
      <li class="filter-option {{ (search == FRIEND_REQUEST) ? 'selected' : ''}}"> <a href="#" ng-click="changeFilterTo('type', FRIEND_REQUEST)">
        Pedidos de Amizade</a> </li>
      <li class="filter-option {{ (search == RIDE_REQUEST) ? 'selected' : ''}}"> <a href="#" ng-click="changeFilterTo('type', RIDE_REQUEST)">
        Pedidos de Carona</a> </li>
      <li class="filter-option {{ (search == RIDE_FOUND) ? 'selected' : ''}}"> <a href="#" ng-click="changeFilterTo('type', RIDE_FOUND)">
        Caronas encontradas</a> </li>
      <!--<li class="filter-option"> <a href="#">Avaliações</a> </li>-->
    </ul>
  </div>
  <div class="notificationsList">
    <span class="lnk">Todas as notificações</span>
    <form>
      <ol class="list-group list_of_items">
        <li class="list-group-item" ng-repeat="notification in notifications_list | filter:getFilter()"
          ng-mouseover="hoverIn()" ng-mouseleave="hoverOut()" ng-click="collapse(notification.nid)">
          
          <span class="fa fa-remove pull-right" ng-show="removable" ng-click="hideNotification(notification.nid)"
            title="Excluir notificação"></span>
          <span class="fui-eye reading-status {{ notification.status ? 'ocapacity' : ''}}" ng-show="removable"
            ng-click="markAsReadNotification(notification.nid)" title="Marcar como {{ notification.status ? 'lida' : 'não lida'}}"></span>

          <!-- Friend request -->
          <div ng-if="notification.type == FRIEND_REQUEST">
            <div class="list-group-item-heading">
              <img class='img-responsive img-rounded' src='{{ notification.associatedUser.photo }}'/>
              <span> <a href="./perfil/{{notification.associatedUser.uid}}"> {{ notification.associatedUser.name }} </a> {{ notification.message }}</span>
              <br><span class="date">{{ notification.date }}</span>
            </div>
            <p class="list-group-item-text">{{ notification.associatedUser.message }} </p>
             <span class="friend-request">
                <button class="btn btn-block btn-lg btn-success" ng-click="acceptFriendRequest(notification.associatedUser.uid, notification.nid)">
                  Adicionar aos amigos!
                </button>
             </span>
          </div>

          <!-- Friend request successful -->
          <div ng-if="notification.type == NEW_FRIEND">
            <div class="list-group-item-heading">
              <img class='img-responsive img-rounded' src='{{ notification.associatedUser.photo }}'/>
              <span> <a href="./perfil/{{notification.associatedUser.uid}}"> {{ notification.associatedUser.name }} </a> {{ notification.message }}</span>
              <br><span class="date">{{ notification.date }}</span>
            </div>
            <p class="list-group-item-text">{{ notification.associatedUser.message }} </p>
          </div>

          <!-- Ride found -->
          <div ng-if="notification.type == RIDE_FOUND">
            <div class="list-group-item-heading">
            <img class='img-responsive img-rounded' src="https://cdn4.iconfinder.com/data/icons/map/500/map-2-512.png"/>
              <span> {{ notification.message }} </span>
              <br><span class="date">{{ notification.date }}</span>
            </div>
            <p class="list-group-item-text">{{ notification.associatedUser.message }} </p>
            <div ng-show="notification.associatedUser.rides.length != 0 && active == notification.nid" class="info">
              <span> Motorista : <a href="./perfil/{{notification.associatedUser.uid}}"> {{ notification.associatedUser.name }} </a></span><br>
              <span> Nº de vagas : {{ notification.ride.seats }} </span> <br>
              <span> Data : <a href="#"> {{ notification.ride.readableDate }} </a></span> <br>
              <span> Para : <a href="#"> {{ notification.ride.dest }} </a></span> <br>
              <span> Semanal : {{ notification.ride.weekly ? "Sim" : "Não" }} </span> <br>
              <span> Passageiros :
                <a href="./perfil/{{passenger.uid}}" ng-repeat="passenger in notification.ride.passengers"> {{ passenger.uid }} </a>
              </span>
            </div>
          </div>

          <!-- Ride request -->
          <div ng-if="notification.type == RIDE_REQUEST">
            <div class="list-group-item-heading">
              <img class='img-responsive img-rounded' src='{{ notification.associatedUser.photo }}'/>
              <span> <a href="./perfil/{{notification.associatedUser.uid}}"> {{ notification.associatedUser.name }} </a> {{ notification.message }}</span>
              <br><span class="date">{{ notification.date }}</span>
            </div>
            <p class="list-group-item-text">{{ notification.associatedUser.message }}</p>
            <div ng-show="active == notification.nid" class="info">
			  <span> Data : <a href="#"> {{ notification.ride.readableDate }} </a></span><br>
              <span> Destino : <a href="#"> {{ notification.ride.dest }} </a></span><br>
              <span> Endereço : <a href="#"> {{ notification.complement }} </a></span><br>
              <span> Bairro : <a href="#"> {{ notification.district }} </a></span><br>
            </div>

            <div class="info-rides">
              <button class="btn btn-lg btn-success accept-request" 
              ng-click="acceptRideRequest(notification.associatedUser.uid, notification.ride, notification.district, notification.complement, notification.nid)">
                Aceitar
              </button>
              <button class="btn btn-lg btn-danger refuse-request" ng-click="refuseRideRequest(notification.nid)">
                Recusar
              </button>
            </div>
          </div>

          <!-- Ride request successful -->
          <div ng-if="notification.type == RIDE_ACCEPTED">
            <div class="list-group-item-heading">
              <img class='img-responsive img-rounded' src='{{ notification.associatedUser.photo }}'/>
              <span> <a href="./perfil/{{notification.associatedUser.uid}}"> {{ notification.associatedUser.name }} </a> {{ notification.message }}</span>
              <br><span class="date">{{ notification.date }}</span>
            </div>
            <p class="list-group-item-text">{{ notification.associatedUser.message }} </p>
            
            <div ng-show="active == notification.nid" class="info">
                <span> Data : <a href="#"> {{ notification.ride.readableDate }} </a></span><br>
                <span> Destino : <a href="#"> {{ notification.ride.dest }} </a></span><br>
            </div>
            
          </div>
        </li>
      </ol>
    </form>
  </div>
</div>
