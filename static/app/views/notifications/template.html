
<div class="container" id="notification">
  <div class="notificationsNav">
    <ul>
      <li class="lnk"> Notifica&ccedil;&otilde;es</li>
      <li class="filter-option {{ (filter == '') ?'selected' : ''}}"> <a href="#" ng-click="changeFilterTo('')">
        Todas as notifica&ccedil;&otilde;es</a> </li>
      <li class="filter-option {{ (filter == 'status') ?'selected' : ''}}"> <a href="#" ng-click="changeFilterTo('status', VIEWED)">
        Notifica&ccedil;&otilde;es lidas</a> </li> <br>
      <li class="lnk">Filtrar por tipo</li>
      <li class="filter-option {{ (filter == 'null') ?'selected' : ''}}"> <a href="#" ng-click="changeFilterTo('')">
        Recentes</a> </li>
      <li class="filter-option {{ (search == FRIEND_REQUEST) ? 'selected' : ''}}"> <a href="#" ng-click="changeFilterTo('type', FRIEND_REQUEST)">
        Pedidos de Amizade</a> </li>
      <li class="filter-option {{ (search == RIDE_REQUEST) ? 'selected' : ''}}"> <a href="#" ng-click="changeFilterTo('type', RIDE_REQUEST)">
        Pedidos de Carona</a> </li>
      <li class="filter-option {{ (search == RIDE_FOUND) ? 'selected' : ''}}"> <a href="#" ng-click="changeFilterTo('type', RIDE_FOUND)">
        Caronas encontradas</a> </li>
      <!--<li class="filter-option"> <a href="#">Avalia&ccedil;&otilde;es</a> </li>-->
    </ul>
  </div>
  <div class="notificationsList">
    <span class="lnk">Todas as notifica&ccedil;&otilde;es</span>
    <form>
      <ol class="list-group list_of_items">
        <li class="list-group-item" ng-repeat="notification in notifications_list | filter:getFilter()"
          ng-mouseover="hoverIn()" ng-mouseleave="hoverOut()" ng-click="collapse(notification.associatedUser.uid)">

          <span class="fa fa-remove pull-right" ng-show="removable" ng-click="hideNotification(notification.associatedUser.uid)"
            title="Excluir notificação"></span>
          <span class="fui-eye reading-status {{ notification.status ? '' : 'ocapacity'}}" ng-show="removable"
            ng-click="markAsReadNotification(notification.associatedUser.uid)" title="Marcar como {{ notification.status ? 'lida' : 'não lida'}}"></span>

          <!-- Friend request -->
          <div ng-if="notification.type == FRIEND_REQUEST">
            <div class="list-group-item-heading">
              <img class='img-responsive img-rounded' src='{{ notification.associatedUser.photo }}'/>
              <span> <a href="#"> {{ notification.associatedUser.name }} </a> {{ notification.message }}</span>
              <br><span class="date">{{ notification.date }}</span>
            </div>
            <p class="list-group-item-text">{{ notification.associatedUser.message }} </p>
             <span class="friend-request">
                <button class="btn btn-block btn-lg btn-success" ng-click="acceptFriendRequest(notification.associatedUser.uid)">
                  Adicionar aos amigos!
                </button>
             </span>
          </div>

          <!-- Friend request successful -->
          <div ng-if="notification.type == NEW_FRIEND">
            <div class="list-group-item-heading">
              <img class='img-responsive img-rounded' src='{{ notification.associatedUser.photo }}'/>
              <span> <a href="#"> {{ notification.associatedUser.name }} </a> {{ notification.message }}</span>
              <br><span class="date">{{ notification.date }}</span>
            </div>
            <p class="list-group-item-text">{{ notification.associatedUser.message }} </p>
          </div>

          <!-- Ride found -->
          <div ng-if="notification.type == RIDE_FOUND">
            <div class="list-group-item-heading">
            <img class='img-responsive img-rounded' src="https://cdn4.iconfinder.com/data/icons/map/500/map-2-512.png"/>
              <span> {{ notification.message }} </span>
              <br><span class="date">{{ notification.date }}</span>
            </div>
            <p class="list-group-item-text">{{ notification.associatedUser.message }} </p>
            <div ng-show="notification.associatedUser.rides.length != 0 && active == notification.associatedUser.uid" class="info">
              <div ng-repeat=" ride in notification.associatedUser.rides">
                <span> Motorista : <a href="#"> {{ ride.driver }} </a></span><br>
                <span> Nº de vagas : {{ ride.numberOfVacancies }} </span> <br>
                <span> Data : <a href="#"> {{ ride.date }} </a></span> <br>
                <span> Para : <a href="#"> {{ notification.ride }} </a></span> <br>
                <span> Semanal : {{ ride.weekly ? "Sim" : "Não" }} </span> <br>
                <span> Passageiros :
                  <a href="#" ng-repeat="passenger in ride.passengers"> {{ passenger.uid }} </a>
                </span>
              </div>
            </div>
            <span class="friend-request">
              <button class="btn btn-block btn-lg btn-info" ng-click="acceptFriendRequest(notification.associatedUser.uid)">
                Pegar Bigu!
              </button>
            </span>

          </div>

          <!-- Ride request -->
          <div ng-if="notification.type == RIDE_REQUEST">
            <div class="list-group-item-heading">
              <img class='img-responsive img-rounded' src='{{ notification.associatedUser.photo }}'/>
              <span> <a href="#"> {{ notification.associatedUser.name }} </a> {{ notification.message }}</span>
              <br><span class="date">{{ notification.date }}</span>
            </div>
            <p class="list-group-item-text">{{ notification.associatedUser.message }}</p>
            <div ng-show="active == notification.associatedUser.uid" class="info">
              <div ng-repeat=" ride in notification.associatedUser.rides">
                <span> Bairro : <a href="#"> {{ ride.routes[0] }} </a></span><br>
                <span> Data e horário: <a href="#"> {{ ride.date }} </a></span><br>
              </div>
            </div>

            <div class="info-rides">
              <button class="btn btn-lg btn-success accept-request" ng-click="acceptRideRequest(notification.associatedUser.uid, notification.ride, notification.district, notification.complement)">
                Aceitar
              </button>
              <button class="btn btn-lg btn-danger refuse-request" ng-click="refuseRideRequest(notification.associatedUser.uid)">
                Recusar
              </button>
            </div>
          </div>

          <!-- Ride request successful -->
          <div ng-if="notification.type == RIDE_ACCEPTED">
            <div class="list-group-item-heading">
              <img class='img-responsive img-rounded' src='{{ notification.associatedUser.photo }}'/>
              <span> <a href="#"> {{ notification.associatedUser.name }} </a> {{ notification.message }}</span>
              <br><span class="date">{{ notification.date }}</span>
            </div>
            <p class="list-group-item-text">{{ notification.associatedUser.message }} </p>
          </div>
        </li>
      </ol>
    </form>
  </div>
</div>
